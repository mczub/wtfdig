import"../chunks/CWj6FrbW.js";import{g as ft,p as gt,i as H,j as pt,Q as mt,F as me,k as x,l as e,w as je,f as k,a as I,O as A,s as a,d as s,b as o,c as _t,q as S,r as l,o as p,n as _e,t as Q,e as J,P as bt}from"../chunks/B2MXvhv6.js";import{i as q}from"../chunks/vFhmboTk.js";import{s as Re,e as xt,i as ht}from"../chunks/DxVMc3Zq.js";import{c as j}from"../chunks/B4IpLhCp.js";import{e as $t,f as Fe,L as yt,F as We,i as wt,j as ze}from"../chunks/B6Llw-_9.js";import{p as kt}from"../chunks/C38Agewu.js";import{d as Ct,S as y}from"../chunks/OoLlb2nt.js";import{r as St}from"../chunks/BfW_D9-_.js";import{S as Pt}from"../chunks/BJGX47oF.js";import{C as Tt}from"../chunks/B4l9w8qc.js";import{S as It}from"../chunks/VgA-Umhg.js";const Ot=({params:be})=>({strats:[],timeline:[]}),tr=Object.freeze(Object.defineProperty({__proto__:null,load:Ot},Symbol.toStringTag,{value:"Module"}));var Ut=k("<!> <!> <!> <!>",1),Dt=k("<!> <!>",1),Ht=k("<div></div>"),jt=k('<button class="button btn btn-lg preset-tonal-secondary border border-secondary-500"><!>Open cheatsheet</button>'),Rt=k('<button class="button btn btn-lg preset-tonal-secondary border border-secondary-500 disabled"><!>Open cheatsheet</button> <div class="flex flex-row items-center gap-2"><!> <span>Cheatsheet mode needs a browser window size of at least 1024 x 768</span></div>',1),Ft=k('<a class="inline-flex items-center text-lg text-blue-600 dark:text-blue-500 hover:underline gap-1" target="_blank" rel="noopener noreferrer"> <!></a>'),Wt=k('<a class="inline-flex items-center text-lg text-blue-600 dark:text-blue-500 hover:underline gap-1" target="_blank" rel="noopener noreferrer"> <!></a>'),zt=k(" <!>",1),Mt=k("<!> <!> <!>",1),Vt=k('<div class="content-center"><!></div>'),At=k('<div class="flex flex-col lg:flex-row gap-2 mb-8"><!> <button class="button btn btn-lg preset-tonal-secondary border border-secondary-500"><!>Copy link</button> <div class="card flex flex-row border-[1px] border-surface-200-800 flex-auto lg:w-0 lg:max-w-full"><pre class="flex-auto pre overflow-x-auto text-nowrap whitespace-nowrap"> </pre> <button class="button btn btn-lg preset-tonal-secondary border border-secondary-500"><!>Copy PF description</button></div></div> <div class="card border-[1px] border-surface-200-800 p-4"><div class="flex flex-col lg:flex-row gap-2"><div class="w-full lg:w-auto content-center"><div class="capitalize font-semibold text-2xl mb-0"> </div> <!></div> <div class="grow"></div> <div><!></div></div> <div class="flex flex-wrap items-center justify-between my-4"><div class="text-xl"> </div> <!></div> <!></div>',1),Jt=k(`<!> <div class="container grow px-4 mx-auto mb-6"><div class="container"><div class="mb-6"><div class="preset-typo-display-1 mt-2 lg:mt-0 lg:-mb-2">Dragonsong's Reprise (Ultimate)</div> <div class="text-xl lg:text-3xl text-surface-400">DSR</div></div> <div class="flex flex-wrap min-w-full justify-between mb-8 card border-[1px] border-surface-200-800 p-4"><div class="space-y-5 v-full dark"><div class="card preset-outlined-warning-500 gap-4 p-4"><p>This site is still under construction, thank you for your patience while we continue to
						work on it.</p> <p>Some strats may be missing images or highlights.</p> <p>This is intended to be a quick reference, please refer to the original guides for full
						explanations of mechanics.</p></div> <div><div class="text-xl mb-2">Which strat are you using?</div> <!></div> <div><div class="text-xl mb-2">Which role are you?</div> <!></div> <div><div class="text-xl mb-2">Which light party are you in?</div> <!></div></div></div> <!></div></div>`,1);function rr(be,B){gt(B,!0);let h=H(void 0),R=H(pt({})),C=H(void 0),O=H(void 0),U=A(()=>$e(e(h))),E=A(()=>Je(e(h),e(C),e(O))),G=H(!0),K=H("original"),xe=A(()=>qe(e(h),e(C),e(O)));const ee=mt("toast");me(()=>{{const t=localStorage.getItem("dsr-role"),r=localStorage.getItem("dsr-party");t&&x(C,JSON.parse(t),!0),r&&x(O,JSON.parse(r),!0)}}),me(()=>{e(C)&&localStorage.setItem("dsr-role",JSON.stringify(e(C))),e(O)&&localStorage.setItem("dsr-party",JSON.stringify(e(O)))}),me(()=>{let t="";je(()=>t=he(e(h),e(R)));const r=kt.url.hash.substring(1);r!==t&&je(()=>Me(r))});function Me(t){const r=t.split(":");r[0]&&x(h,r[0],!0),r.length===1&&x(R,L(r[0]),!0)}function he(t,r){return t?t&&r&&Ct(L(),r)?t:`${t}`:""}function Ve(t){x(h,t.value,!0),x(R,L(t.value),!0);const r=he(e(h),e(R));St(`#${r}`,{})}function Ae(){navigator.clipboard.writeText(window.location.href),ee.create({description:"Copied link to clipboard!",type:"success"})}function $e(t){return!t||!e(C)||!e(O)?`Couldn't find ${t} strat`:B.data.strats.find(r=>r.stratName===t)}function F(t,r){return t&&(r&&e(R)[r]&&typeof t!="string"?t[e(R)[r]]:t)}function Je(t,r,m){var v;if(!t||!r||!m)return"";const g=$e(t);if(typeof g=="string")return`Couldn't find ${t} strat for ${r} ${m}`;const $=(v=g==null?void 0:g.strats)==null?void 0:v.map(n=>{var f;return{...n,description:F(n.description,n.tag),imageUrl:F(n.imageUrl,n.tag),mask:F(n.mask,n.tag),mechs:(f=n.mechs)==null?void 0:f.map(u=>({...u,description:F(u.description,n.tag),imageUrl:F(u.imageUrl,n.tag),strats:u.strats&&u.strats.filter(c=>c.role===r&&c.party===m).map(c=>({...c,description:F(c.description,n.tag),imageUrl:F(c.imageUrl,n.tag),mask:F(c.mask,n.tag)}))}))}});return $||`Couldn't find ${t} strat for ${r} ${m}`}function L(t){return{}}function qe(t,r,m){if(!t||!r||!m)return"";const g={},$={MT:"MT",OT:"ST",H1:"H1",H2:"H2",M1:"D1",M2:"D2",R1:"D3",R2:"D4"};let v="";r==="Tank"?v=m===1?"MT":"OT":v=r.charAt(0).toUpperCase()+m.toString();let n=[g[t]];return(t==="game8"||t==="mr")&&v!==$[v]?`${g[t]} - ${v}/${$[v]}`:`${n.join(" | ")} - ${v}`}function ye(){return e(h)?`${[{}[e(h)]].join(" | ")} | ${window.location.href}`:""}function Ee(){navigator.clipboard.writeText(ye()),ee.create({description:"Copied PF description to clipboard!",type:"success"})}let te=H(0),re=H(0),Le=A(()=>e(te)>1024&&e(re)>768),ae=H(!1);var Ne={toast:ee},we=Jt(),ke=I(we);{let t=A(()=>`DSR Cheatsheet - ${e(xe)}`);$t(ke,{get title(){return e(t)},get timeline(){return B.data.timeline},get stratName(){return e(h)},get stratState(){return e(R)},getStratMechs:L,get individualStrat(){return e(E)},get spotlight(){return e(G)},get alignment(){return e(K)},rows:"3",columns:"5",get innerHeight(){return e(re)},get innerWidth(){return e(te)},tabTags:{},splitTimeline:!1,get role(){return e(C)},get cheatsheetOpenState(){return e(ae)},set cheatsheetOpenState(r){x(ae,r,!0)}})}var Ce=a(ke,2),Se=s(Ce),ne=a(s(Se),2),Pe=s(ne),oe=a(s(Pe),2),Qe=a(s(oe),2);y(Qe,{classes:"flex-wrap",name:"stratName",get value(){return e(h)},onValueChange:Ve}),l(oe);var ie=a(oe,2),Be=a(s(ie),2);y(Be,{name:"role",classes:"flex-wrap",get value(){return e(C)},onValueChange:t=>x(C,t.value,!0),children:(t,r)=>{var m=Ut(),g=I(m);j(g,()=>y.Item,(f,u)=>{u(f,{value:"Tank",children:(c,_)=>{p();var w=S("Tank");o(c,w)},$$slots:{default:!0}})});var $=a(g,2);j($,()=>y.Item,(f,u)=>{u(f,{value:"Healer",children:(c,_)=>{p();var w=S("Healer");o(c,w)},$$slots:{default:!0}})});var v=a($,2);j(v,()=>y.Item,(f,u)=>{u(f,{value:"Melee",children:(c,_)=>{p();var w=S("Melee");o(c,w)},$$slots:{default:!0}})});var n=a(v,2);j(n,()=>y.Item,(f,u)=>{u(f,{value:"Ranged",children:(c,_)=>{p();var w=S("Ranged");o(c,w)},$$slots:{default:!0}})}),o(t,m)},$$slots:{default:!0}}),l(ie);var Te=a(ie,2),Ge=a(s(Te),2);{let t=A(()=>{var r;return(r=e(O))==null?void 0:r.toString()});y(Ge,{name:"role",get value(){return e(t)},onValueChange:r=>x(O,parseInt(r.value),!0),children:(r,m)=>{var g=Dt(),$=I(g);j($,()=>y.Item,(n,f)=>{f(n,{value:"1",children:(u,c)=>{p();var _=S("1");o(u,_)},$$slots:{default:!0}})});var v=a($,2);j(v,()=>y.Item,(n,f)=>{f(n,{value:"2",children:(u,c)=>{p();var _=S("2");o(u,_)},$$slots:{default:!0}})}),o(r,g)},$$slots:{default:!0}})}l(Te),l(Pe),l(ne);var Ke=a(ne,2);{var Xe=t=>{var r=_e(),m=I(r);{var g=v=>{var n=S();Q(()=>J(n,e(U))),o(v,n)},$=v=>{var n=_e(),f=I(n);{var u=_=>{var w=Ht();o(_,w)},c=_=>{var w=At(),se=I(w),Ie=s(se);{var Ye=d=>{var i=jt();i.__click=()=>x(ae,!0);var b=s(i);We(b,{}),p(),l(i),o(d,i)},Ze=d=>{var i=Rt(),b=I(i),D=s(b);We(D,{}),p(),l(b);var z=a(b,2),P=s(z);wt(P,{size:24}),p(2),l(z),o(d,i)};q(Ie,d=>{e(Le)?d(Ye):d(Ze,!1)})}var X=a(Ie,2);X.__click=()=>Ae();var et=s(X);yt(et,{}),p(),l(X);var Oe=a(X,2),le=s(Oe),tt=s(le,!0);l(le);var de=a(le,2);de.__click=()=>Ee();var rt=s(de);Tt(rt,{}),p(),l(de),l(Oe),l(se);var Ue=a(se,2),ve=s(Ue),ue=s(ve),ce=s(ue),at=s(ce,!0);l(ce);var nt=a(ce,2);{var ot=d=>{var i=Ft(),b=s(i),D=a(b);ze(D,{}),l(i),Q(()=>{Re(i,"href",e(U).stratUrl),J(b,`${e(U).description??""} `)}),o(d,i)},it=d=>{var i=_e(),b=I(i);{var D=z=>{var P=zt(),N=I(P),Y=a(N);xt(Y,17,()=>Object.entries(e(U).stratUrl),ht,(pe,M)=>{var W=A(()=>bt(e(M),2));let V=()=>e(W)[0],Z=()=>e(W)[1];var T=Wt(),He=s(T),ct=a(He);ze(ct,{}),l(T),Q(()=>{Re(T,"href",Z()),J(He,`${V()??""} `)}),o(pe,T)}),Q(()=>J(N,`${e(U).description??""} `)),o(z,P)};q(b,z=>{var P;typeof((P=e(U))==null?void 0:P.stratUrl)=="object"&&z(D)},!0)}o(d,i)};q(nt,d=>{var i;typeof((i=e(U))==null?void 0:i.stratUrl)=="string"?d(ot):d(it,!1)})}l(ue);var De=a(ue,4),st=s(De);It(st,{name:"spotlight-toggle",get checked(){return e(G)},onCheckedChange:d=>x(G,d.checked,!0),children:(d,i)=>{p();var b=S("Highlight my spots");o(d,b)},$$slots:{default:!0}}),l(De),l(ve);var fe=a(ve,2),ge=s(fe),lt=s(ge,!0);l(ge);var dt=a(ge,2);{var vt=d=>{var i=Vt(),b=s(i);y(b,{name:"alignment",get value(){return e(K)},onValueChange:D=>x(K,D.value,!0),children:(D,z)=>{var P=Mt(),N=I(P);j(N,()=>y.Item,(M,W)=>{W(M,{value:"original",children:(V,Z)=>{p();var T=S("Original");o(V,T)},$$slots:{default:!0}})});var Y=a(N,2);j(Y,()=>y.Item,(M,W)=>{W(M,{value:"truenorth",children:(V,Z)=>{p();var T=S("True North");o(V,T)},$$slots:{default:!0}})});var pe=a(Y,2);j(pe,()=>y.Item,(M,W)=>{W(M,{value:"addrelative",children:(V,Z)=>{p();var T=S("Wall Relative");o(V,T)},$$slots:{default:!0}})}),o(D,P)},$$slots:{default:!0}}),l(i),o(d,i)};q(dt,d=>{e(U).strats.some(i=>i.alignmentTransforms)&&d(vt)})}l(fe);var ut=a(fe,2);Pt(ut,{get strat(){return e(U)},get timeline(){return B.data.timeline},get stratName(){return e(h)},get stratState(){return e(R)},getStratMechs:L,get individualStrat(){return e(E)},get spotlight(){return e(G)},get alignment(){return e(K)},get role(){return e(C)}}),l(Ue),Q(d=>{J(tt,d),J(at,e(xe)),J(lt,e(E).notes)},[ye]),o(_,w)};q(f,_=>{typeof e(E)>"u"?_(u):_(c,!1)},!0)}o(v,n)};q(m,v=>{typeof e(E)=="string"?v(g):v($,!1)})}o(t,r)};q(Ke,t=>{e(h)&&e(C)&&e(O)&&t(Xe)})}return l(Se),l(Ce),Fe("innerWidth",t=>x(te,t,!0)),Fe("innerHeight",t=>x(re,t,!0)),o(be,we),_t(Ne)}ft(["click"]);export{rr as component,tr as universal};
